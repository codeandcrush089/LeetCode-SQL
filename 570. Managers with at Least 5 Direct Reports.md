# Problem 570: Managers with at Least 5 Direct Reports
![Medium](https://img.shields.io/badge/Level-Medium-yellow)

```sql
SELECT
    M.name
FROM
    Employee M -- Alias M for the Manager records
INNER JOIN (
    -- Subquery T1 finds all manager IDs that have 5 or more reports.
    SELECT
        managerId
    FROM
        Employee
    -- We exclude employees without a manager (managerId IS NULL) from the count.
    WHERE
        managerId IS NOT NULL
    GROUP BY
        managerId
    -- The HAVING clause filters the groups where the count of employees (reports) is 5 or more.
    HAVING
        COUNT(id) >= 5
) AS T1
ON M.id = T1.managerId;
```
---
## ðŸ§ Query Explanation

### **1. Subquery (`T1`)**

* Reads from the `Employee` table.
* Groups employees by `managerId`.
* Excludes rows where `managerId IS NULL` (employees without a manager).
* Uses `HAVING COUNT(id) >= 5` to keep only managers with **at least 5 direct reports**.
* Outputs the qualifying `managerId` values.



### **2. Join with `Employee M`**

* Joins the list of qualifying `managerId`s back to the `Employee` table.
* Matches `M.id = T1.managerId` to retrieve **manager records**.



### **3. Final SELECT**

* `SELECT M.name` returns the **names of managers** who have **5 or more direct reports**.

