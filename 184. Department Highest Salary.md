# Problem 184: Department Highest Salary
![Medium](https://img.shields.io/badge/Level-Medium-yellow)

```sql
SELECT
    D.name AS Department,
    E.name AS Employee,
    E.salary AS Salary
FROM
    Employee E
JOIN
    Department D ON E.departmentId = D.id
WHERE
    -- Use a Common Table Expression (CTE) or subquery to rank salaries
    (E.departmentId, E.salary) IN (
        SELECT
            departmentId,
            MAX(salary)
        FROM
            Employee
        GROUP BY
            departmentId
    )
ORDER BY
    Department, Salary DESC;
```
---
## üßê Query Explanation

### **1. `FROM Employee E JOIN Department D`**

Joins employees with their departments using `departmentId`.


### **2. Subquery in `WHERE`**

```sql
SELECT departmentId, MAX(salary)
FROM Employee
GROUP BY departmentId
```

Finds the **highest salary in each department**.


### **3. `(E.departmentId, E.salary) IN (...)`**

Keeps only employees whose **salary equals the maximum salary** for their department
‚Üí Handles ties (multiple employees with the same top salary).


### **4. `SELECT D.name, E.name, E.salary`**

Outputs:

* Department name
* Employee name
* Salary


### **5. `ORDER BY Department, Salary DESC`**

Sorts results by department name, then highest salary first.

