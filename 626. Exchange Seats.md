# Problem 626: Exchange Seats
![Medium](https://img.shields.io/badge/Level-Medium-yellow)

```sql
SELECT
    CASE
        -- Case 1: If the ID is odd AND it is the highest ID in the table, it remains unchanged.
        WHEN MOD(id, 2) != 0 AND id = (SELECT MAX(id) FROM Seat) THEN id
        -- Case 2: If the ID is odd (and not the last one), swap up.
        WHEN MOD(id, 2) != 0 THEN id + 1
        -- Case 3: If the ID is even, swap down.
        ELSE id - 1
    END AS id,
    student
FROM
    Seat
ORDER BY
    id ASC;
```
---
## üßê Query Explanation

### **1. `FROM Seat`**

Reads seat assignments from the `Seat` table.


### **2. `CASE` expression (seat swapping logic)**

* **Odd ID & last seat**

```sql
WHEN MOD(id, 2) != 0 AND id = (SELECT MAX(id) FROM Seat) THEN id
```

If the seat ID is **odd** and it is the **highest (last) ID**, it stays the same (no pair to swap with).

* **Odd ID (not last)**

```sql
WHEN MOD(id, 2) != 0 THEN id + 1
```

Odd seat swaps **up** with the next even seat.

* **Even ID**

```sql
ELSE id - 1
```

Even seat swaps **down** with the previous odd seat.


### **3. `SELECT id, student`**

Outputs the **new seat ID** along with the student name.


### **4. `ORDER BY id ASC`**

Sorts the final result by the **new seat ID order**.

